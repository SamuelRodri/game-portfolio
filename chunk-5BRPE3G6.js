import{B as m,Ca as S,D as o,Da as I,E as i,Ea as d,F as u,Fa as M,Ga as y,Ha as L,I as v,J as f,Ja as E,K as g,Ka as O,M as r,O as h,Pa as P,Qa as k,Ra as N,Sa as T,X as C,Z as F,ea as w,r as b,s as x,w as s,x as p,y as _,z as c}from"./chunk-2JFFXMPA.js";function q(n,a){n&1&&(o(0,"small"),r(1," Email inv\xE1lido "),i())}function z(n,a){n&1&&(o(0,"small"),r(1," La contrase\xF1a es requerida "),i())}function G(n,a){if(n&1){let t=v();o(0,"form",7),f("ngSubmit",function(){b(t);let l=g();return x(l.onLogin())}),o(1,"div",8)(2,"label",9),r(3,"Email"),i(),u(4,"input",10),c(5,q,2,0,"small",11),i(),o(6,"div",8)(7,"label",12),r(8,"Contrase\xF1a"),i(),u(9,"input",13),c(10,z,2,0,"small",11),i(),o(11,"button",14),r(12," Iniciar Sesi\xF3n "),i()()}if(n&2){let t,e,l=g();m("formGroup",l.loginForm),s(5),m("ngIf",((t=l.loginForm.get("email"))==null?null:t.invalid)&&((t=l.loginForm.get("email"))==null?null:t.touched)),s(5),m("ngIf",((e=l.loginForm.get("password"))==null?null:e.invalid)&&((e=l.loginForm.get("password"))==null?null:e.touched)),s(),m("disabled",l.loginForm.invalid)}}function A(n,a){n&1&&(o(0,"div",15)(1,"p"),r(2,"Iniciando sesi\xF3n..."),i()())}function D(n,a){if(n&1&&(o(0,"div",16),r(1),i()),n&2){let t=g();s(),h(" ",t.error," ")}}var V=class n{constructor(a,t,e){this.fb=a;this.authService=t;this.router=e}loginForm;isLoading=!1;error=null;ngOnInit(){this.loginForm=this.fb.group({email:["",[d.required,d.email]],password:["",[d.required,d.minLength(6)]]})}onLogin(){if(this.loginForm.invalid)return;this.isLoading=!0,this.error=null;let{email:a,password:t}=this.loginForm.value;this.authService.login(a,t).subscribe({next:e=>{this.isLoading=!1,e&&setTimeout(()=>{this.router.navigate(["/admin"])},500)},error:e=>{this.isLoading=!1,console.error("Error de autenticaci\xF3n:",e),e.message.includes("user-not-found")?this.error="Email no encontrado en Firebase":e.message.includes("wrong-password")?this.error="Contrase\xF1a incorrecta":e.message.includes("too-many-requests")?this.error="Demasiados intentos. Intenta m\xE1s tarde":this.error=`Error: ${e.message}`}})}goBack(){this.router.navigate(["/"])}static \u0275fac=function(t){return new(t||n)(p(k),p(S),p(w))};static \u0275cmp=_({type:n,selectors:[["app-login"]],decls:11,vars:3,consts:[[1,"login-container"],[1,"login-box"],[1,"subtitle"],[3,"formGroup","ngSubmit",4,"ngIf"],["class","loading",4,"ngIf"],["class","error",4,"ngIf"],[1,"btn-back",3,"click"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","email"],["type","email","id","email","formControlName","email","placeholder","tu@email.com","required",""],[4,"ngIf"],["for","password"],["type","password","id","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required",""],["type","submit",1,"btn-login",3,"disabled"],[1,"loading"],[1,"error"]],template:function(t,e){t&1&&(o(0,"div",0)(1,"div",1)(2,"h1"),r(3,"Panel de Administraci\xF3n"),i(),o(4,"p",2),r(5,"Acceso restringido"),i(),c(6,G,13,4,"form",3)(7,A,3,0,"div",4)(8,D,2,1,"div",5),o(9,"button",6),f("click",function(){return e.goBack()}),r(10," \u2190 Volver "),i()()()),t&2&&(s(6),m("ngIf",!e.isLoading),s(),m("ngIf",e.isLoading),s(),m("ngIf",e.error))},dependencies:[F,C,N,L,I,M,y,P,T,E,O],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);padding:20px}.login-box[_ngcontent-%COMP%]{background:#fff;padding:40px;border-radius:10px;box-shadow:0 10px 40px #0000004d;width:100%;max-width:400px}h1[_ngcontent-%COMP%]{text-align:center;color:#333;margin-bottom:10px}.subtitle[_ngcontent-%COMP%]{text-align:center;color:#999;margin-bottom:30px;font-size:14px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;color:#333;font-weight:500}input[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ddd;border-radius:5px;font-size:14px;box-sizing:border-box}input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 5px #667eea4d}small[_ngcontent-%COMP%]{display:block;color:#e74c3c;margin-top:5px;font-size:12px}.btn-login[_ngcontent-%COMP%]{width:100%;padding:12px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:5px;font-size:16px;font-weight:600;cursor:pointer;transition:transform .2s}.btn-login[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px)}.btn-login[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-back[_ngcontent-%COMP%]{width:100%;margin-top:15px;padding:10px;background:#f0f0f0;color:#333;border:none;border-radius:5px;cursor:pointer;font-size:14px}.btn-back[_ngcontent-%COMP%]:hover{background:#e0e0e0}.loading[_ngcontent-%COMP%]{text-align:center;color:#667eea}.error[_ngcontent-%COMP%]{background:#fee;color:#c33;padding:10px;border-radius:5px;margin-bottom:20px;font-size:14px;border-left:4px solid #c33}"]})};export{V as LoginComponent};
