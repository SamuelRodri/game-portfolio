import{a as N}from"./chunk-HLECI2Y5.js";import{A as u,Ba as T,C as n,Ca as q,D as t,Da as b,E as c,Ea as U,Fa as z,Ga as L,H as C,Ha as R,I as g,Ia as $,J as f,Ja as G,Ka as B,L as o,La as H,M as v,Ma as W,N as P,Na as J,O as S,Oa as K,Pa as Q,Qa as X,R as k,Ra as Y,S as I,U as w,V as j,W as F,X as V,Y as A,da as D,e as O,j as M,q as m,r as p,u as y,v as l,w as h,x as E,y as x}from"./chunk-FGGZK73V.js";function ee(s,e){if(s&1){let i=C();n(0,"div",63),c(1,"img",64),n(2,"button",65),g("click",function(){let a=m(i).index,d=f(2);return p(d.removeProjectImage(a))}),o(3,"\u2715"),t()()}if(s&2){let i=e.$implicit,r=e.index;l(),u("src",i,y)("alt","Imagen "+(r+1))}}function te(s,e){if(s&1&&(n(0,"div",8)(1,"label"),o(2),t(),n(3,"div",61),x(4,ee,4,2,"div",62),t()()),s&2){let i=f();l(2),P("\u{1F4F8} Im\xE1genes en el Proyecto (",i.projectImages.length,")"),l(2),u("ngForOf",i.projectImages)}}function ne(s,e){if(s&1){let i=C();n(0,"button",66),g("click",function(){m(i);let a=f();return p(a.cancelEdit())}),o(1," Cancelar "),t()}}function ie(s,e){if(s&1&&(n(0,"div",67),o(1),t()),s&2){let i=f();l(),P(" ",i.successMessage," ")}}function oe(s,e){if(s&1&&(n(0,"div",68),o(1),t()),s&2){let i=f();l(),P(" ",i.errorMessage," ")}}function re(s,e){if(s&1){let i=C();n(0,"div",69)(1,"h3"),o(2),t(),n(3,"p",70),o(4),t(),n(5,"p",71),o(6),t(),n(7,"p",72),o(8),t(),n(9,"div",73)(10,"button",74),g("click",function(){let a=m(i).$implicit,d=f();return p(d.onEdit(a))}),o(11,"Editar"),t(),n(12,"button",75),g("click",function(){let a=m(i).$implicit,d=f();return p(d.onDelete(a.id))}),o(13,"Eliminar"),t()()()}if(s&2){let i=e.$implicit;l(2),v(i.title),l(2),S("",i.engine," \u2022 ",i.year,""),l(),u("ngClass",i.status),l(),v(i.status),l(2),v(i.shortDescription)}}var Z=class s{constructor(e,i,r,a){this.fb=e;this.authService=i;this.firestoreService=r;this.router=a;this.initForm()}projectForm;projects$;isSubmitting=!1;successMessage=null;errorMessage=null;editingId=null;selectedCategories=[];projectImages=[];ngOnInit(){this.projects$=this.firestoreService.getAll()}initForm(){this.projectForm=this.fb.group({title:["",b.required],engine:["",b.required],language:["",b.required],year:["",b.required],order:[""],status:["",b.required],shortDescription:["",b.required],longDescription:["",b.required],video:[""],github:[""],itch:[""],demo:[""]})}onCategoryChange(e,i){e.target.checked?this.selectedCategories.includes(i)||this.selectedCategories.push(i):this.selectedCategories=this.selectedCategories.filter(a=>a!==i)}onTagsChange(e){let r=e.target.value.split(",").map(a=>a.trim()).filter(a=>a)}onImageFilesSelected(e){}addImageUrl(){let e=document.getElementById("imageUrl"),i=e?.value.trim();if(!i){this.errorMessage="Escribe una URL de imagen";return}if(!this.isValidUrl(i)){this.errorMessage="URL inv\xE1lida. Debe comenzar con http:// o https://";return}if(this.projectImages.includes(i)){this.errorMessage="Esta imagen ya est\xE1 en la lista";return}this.projectImages.push(i),e&&(e.value=""),this.errorMessage=null,this.successMessage="\u2705 Imagen a\xF1adida",setTimeout(()=>{this.successMessage=null},2e3)}isValidUrl(e){try{return new URL(e),e.startsWith("http://")||e.startsWith("https://")}catch{return!1}}uploadProjectImages(){return O(this,null,function*(){})}removeProjectImage(e){this.projectImages.splice(e,1)}onSubmit(){if(this.projectForm.invalid||this.selectedCategories.length===0){this.errorMessage="Por favor completa todos los campos obligatorios y selecciona al menos una categor\xEDa";return}this.isSubmitting=!0,this.errorMessage=null,this.successMessage=null;let e=this.projectForm.value,i={title:e.title,engine:e.engine,language:e.language,year:e.year,category:this.selectedCategories,status:e.status,shortDescription:e.shortDescription,longDescription:e.longDescription,tags:[],images:this.projectImages,video:e.video||null,order:e.order?parseInt(e.order,10):void 0,links:{github:e.github||null,itch:e.itch||null,demo:e.demo||null}};(this.editingId?this.firestoreService.update(this.editingId,i).pipe(M(()=>{})):this.firestoreService.create(i).pipe(M(()=>{}))).subscribe({next:()=>{this.isSubmitting=!1,this.successMessage=this.editingId?"Proyecto actualizado exitosamente":"Proyecto creado exitosamente",this.resetForm(),this.editingId=null,this.projects$=this.firestoreService.getAll(),setTimeout(()=>{this.successMessage=null},3e3)},error:a=>{this.isSubmitting=!1,this.errorMessage="Error al guardar el proyecto: "+a.message,console.error("Error:",a)}})}onEdit(e){this.editingId=e.id,this.selectedCategories=Array.isArray(e.category)?[...e.category]:[e.category],this.projectImages=e.images.map(r=>typeof r=="string"?r:r.url),this.projectForm.patchValue({title:e.title,engine:e.engine,language:e.language,year:e.year,order:e.order||"",status:e.status,shortDescription:e.shortDescription,longDescription:e.longDescription,video:e.video||"",github:e.links.github||"",itch:e.links.itch||"",demo:e.links.demo||""});let i=document.querySelector(".form-section");i&&i.scrollIntoView({behavior:"smooth",block:"start"})}onDelete(e){confirm("\xBFEst\xE1s seguro de que quieres eliminar este proyecto?")&&this.firestoreService.delete(e).subscribe({next:()=>{this.successMessage="Proyecto eliminado exitosamente",this.projects$=this.firestoreService.getAll(),setTimeout(()=>{this.successMessage=null},3e3)},error:i=>{this.errorMessage="Error al eliminar el proyecto: "+i.message}})}resetForm(){this.projectForm.reset(),this.selectedCategories=[],this.projectImages=[],this.editingId=null;let e=document.getElementById("imageUrl");e&&(e.value="")}cancelEdit(){this.resetForm()}logout(){this.authService.logout().subscribe({next:()=>{this.router.navigate(["/"])},error:e=>{console.error("Error al cerrar sesi\xF3n:",e)}})}static \u0275fac=function(i){return new(i||s)(h(Q),h(T),h(N),h(D))};static \u0275cmp=E({type:s,selectors:[["app-admin-panel"]],decls:117,vars:11,consts:[["imageUrlInput",""],[1,"admin-container"],[1,"admin-header"],[1,"btn-logout",3,"click"],[1,"admin-content"],[1,"form-section"],[3,"ngSubmit","formGroup"],[1,"form-row"],[1,"form-group"],["for","title"],["type","text","id","title","formControlName","title","required",""],["for","engine"],["type","text","id","engine","formControlName","engine","required",""],["for","language"],["type","text","id","language","formControlName","language","required",""],["for","year"],["type","number","id","year","formControlName","year","required",""],["for","order"],["type","number","id","order","formControlName","order","min","1","placeholder","Menor = primero"],[1,"checkbox-group"],[1,"checkbox-label"],["type","checkbox","value","proyecto",3,"change"],["type","checkbox","value","gamejam",3,"change"],["type","checkbox","value","vr",3,"change"],["for","status"],["id","status","formControlName","status","required",""],["value",""],["value","terminado"],["value","en-desarrollo"],["value","pausado"],["value","prototipo"],["for","shortDescription"],["id","shortDescription","formControlName","shortDescription","rows","2","required",""],["for","longDescription"],["id","longDescription","formControlName","longDescription","rows","4","required",""],["for","tags"],["type","text","id","tags","placeholder","tag1, tag2, tag3",3,"change"],[1,"form-group-nested"],["for","github"],["type","url","id","github","formControlName","github"],["for","itch"],["type","url","id","itch","formControlName","itch"],["for","demo"],["type","url","id","demo","formControlName","demo"],["for","imageUrl"],[1,"image-url-input-group"],["type","url","id","imageUrl","placeholder","https://ejemplo.com/imagen.jpg",1,"image-url-input"],["type","button",1,"btn-add-image",3,"click"],[1,"text-muted"],["class","form-group",4,"ngIf"],["for","video"],["type","url","id","video","formControlName","video"],[1,"button-group"],["type","submit",1,"btn-submit",3,"disabled"],["type","button",1,"btn-reset",3,"click"],["type","button","class","btn-cancel",3,"click",4,"ngIf"],["class","success",4,"ngIf"],["class","error",4,"ngIf"],[1,"projects-section"],[1,"projects-list"],["class","project-card",4,"ngFor","ngForOf"],[1,"uploaded-images"],["class","image-item",4,"ngFor","ngForOf"],[1,"image-item"],[3,"src","alt"],["type","button",1,"btn-remove-image",3,"click"],["type","button",1,"btn-cancel",3,"click"],[1,"success"],[1,"error"],[1,"project-card"],[1,"meta"],[1,"status",3,"ngClass"],[1,"short-desc"],[1,"card-buttons"],[1,"btn-edit",3,"click"],[1,"btn-delete",3,"click"]],template:function(i,r){if(i&1){let a=C();n(0,"div",1)(1,"div",2)(2,"h1"),o(3,"Panel de Administraci\xF3n"),t(),n(4,"button",3),g("click",function(){return m(a),p(r.logout())}),o(5,"Cerrar Sesi\xF3n"),t()(),n(6,"div",4)(7,"div",5)(8,"h2"),o(9),t(),n(10,"form",6),g("ngSubmit",function(){return m(a),p(r.onSubmit())}),n(11,"div",7)(12,"div",8)(13,"label",9),o(14,"T\xEDtulo *"),t(),c(15,"input",10),t(),n(16,"div",8)(17,"label",11),o(18,"Motor *"),t(),c(19,"input",12),t()(),n(20,"div",7)(21,"div",8)(22,"label",13),o(23,"Lenguaje *"),t(),c(24,"input",14),t(),n(25,"div",8)(26,"label",15),o(27,"A\xF1o *"),t(),c(28,"input",16),t(),n(29,"div",8)(30,"label",17),o(31,"Orden en Carrusel"),t(),c(32,"input",18),t()(),n(33,"div",8)(34,"label"),o(35,"Categor\xEDas *"),t(),n(36,"div",19)(37,"label",20)(38,"input",21),g("change",function(_){return m(a),p(r.onCategoryChange(_,"proyecto"))}),t(),o(39," Proyecto "),t(),n(40,"label",20)(41,"input",22),g("change",function(_){return m(a),p(r.onCategoryChange(_,"gamejam"))}),t(),o(42," Game Jam "),t(),n(43,"label",20)(44,"input",23),g("change",function(_){return m(a),p(r.onCategoryChange(_,"vr"))}),t(),o(45," VR "),t()()(),n(46,"div",8)(47,"label",24),o(48,"Estado *"),t(),n(49,"select",25)(50,"option",26),o(51,"Selecciona un estado"),t(),n(52,"option",27),o(53,"Terminado"),t(),n(54,"option",28),o(55,"En Desarrollo"),t(),n(56,"option",29),o(57,"Pausado"),t(),n(58,"option",30),o(59,"Prototipo"),t()()(),n(60,"div",8)(61,"label",31),o(62,"Descripci\xF3n Corta *"),t(),c(63,"textarea",32),t(),n(64,"div",8)(65,"label",33),o(66,"Descripci\xF3n Larga *"),t(),c(67,"textarea",34),t(),n(68,"div",8)(69,"label",35),o(70,"Tags (separados por comas)"),t(),n(71,"input",36),g("change",function(_){return m(a),p(r.onTagsChange(_))}),t()(),n(72,"div",8)(73,"label"),o(74,"Enlaces"),t(),n(75,"div",7)(76,"div",37)(77,"label",38),o(78,"GitHub"),t(),c(79,"input",39),t(),n(80,"div",37)(81,"label",40),o(82,"Itch.io"),t(),c(83,"input",41),t(),n(84,"div",37)(85,"label",42),o(86,"Demo"),t(),c(87,"input",43),t()()(),n(88,"div",8)(89,"label",44),o(90,"\u{1F5BC}\uFE0F URLs de Im\xE1genes"),t(),n(91,"div",45),c(92,"input",46,0),n(94,"button",47),g("click",function(){return m(a),p(r.addImageUrl())}),o(95," \u2795 A\xF1adir "),t()(),n(96,"small",48),o(97,'Pega la URL de una imagen y haz clic en "A\xF1adir"'),t()(),x(98,te,5,2,"div",49),n(99,"div",8)(100,"label",50),o(101,"URL del Video"),t(),c(102,"input",51),t(),n(103,"div",52)(104,"button",53),o(105),t(),n(106,"button",54),g("click",function(){return m(a),p(r.resetForm())}),o(107," Limpiar "),t(),x(108,ne,2,0,"button",55),t()(),x(109,ie,2,1,"div",56)(110,oe,2,1,"div",57),t(),n(111,"div",58)(112,"h2"),o(113,"Proyectos Existentes"),t(),n(114,"div",59),x(115,re,14,6,"div",60),k(116,"async"),t()()()()}i&2&&(l(9),v(r.editingId?"Editar Proyecto":"Agregar Nuevo Proyecto"),l(),u("formGroup",r.projectForm),l(88),u("ngIf",r.projectImages.length>0),l(6),u("disabled",r.projectForm.invalid||r.isSubmitting),l(),P(" ",r.isSubmitting?"Guardando...":r.editingId?"Actualizar":"Crear"," Proyecto "),l(3),u("ngIf",r.editingId),l(),u("ngIf",r.successMessage),l(),u("ngIf",r.errorMessage),l(5),u("ngForOf",I(116,9,r.projects$)))},dependencies:[A,w,j,F,V,X,L,H,W,q,R,B,U,z,K,J,Y,$,G],styles:[".admin-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:40px 20px}.admin-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:40px}.admin-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;color:#333}.btn-logout[_ngcontent-%COMP%]{padding:10px 20px;background:#e74c3c;color:#fff;border:none;border-radius:5px;cursor:pointer;font-weight:500}.btn-logout[_ngcontent-%COMP%]:hover{background:#c0392b}.admin-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:40px}@media (max-width: 1024px){.admin-content[_ngcontent-%COMP%]{grid-template-columns:1fr}}.form-section[_ngcontent-%COMP%], .projects-section[_ngcontent-%COMP%]{background:#f9f9f9;padding:30px;border-radius:10px;border:1px solid #e0e0e0}.form-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .projects-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;color:#333;margin-bottom:20px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:15px}@media (max-width: 768px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:8px;color:#333;font-weight:500;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:10px;border:1px solid #ddd;border-radius:5px;font-family:inherit;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 5px #667eea33}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}.form-group-nested[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:5px;font-size:13px}.form-group-nested[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:8px;font-size:13px}.checkbox-group[_ngcontent-%COMP%]{display:flex;gap:15px}.checkbox-group[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer}.checkbox-group[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{cursor:pointer}.button-group[_ngcontent-%COMP%]{display:flex;gap:10px;margin-top:10px}.button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 20px;border:none;border-radius:5px;font-weight:600;cursor:pointer;transition:all .2s}.button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-submit[_ngcontent-%COMP%]{background:#667eea;color:#fff;flex:1}.btn-submit[_ngcontent-%COMP%]:hover:not(:disabled){background:#5568d3}.btn-reset[_ngcontent-%COMP%]{background:#95a5a6;color:#fff}.btn-reset[_ngcontent-%COMP%]:hover{background:#7f8c8d}.btn-cancel[_ngcontent-%COMP%]{background:#f39c12;color:#fff}.btn-cancel[_ngcontent-%COMP%]:hover{background:#e67e22}.success[_ngcontent-%COMP%]{background:#d4edda;color:#155724;padding:12px;border-radius:5px;border-left:4px solid #28a745}.error[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;padding:12px;border-radius:5px;border-left:4px solid #f5c6cb}.projects-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px;max-height:800px;overflow-y:auto}.project-card[_ngcontent-%COMP%]{background:#fff;padding:15px;border-radius:5px;border:1px solid #ddd;transition:all .2s}.project-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #0000001a}.project-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;color:#333;font-size:16px}.project-card[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{margin:5px 0;font-size:12px;color:#999}.project-card[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{display:inline-block;padding:4px 8px;border-radius:3px;font-size:11px;font-weight:600;margin:8px 0}.project-card[_ngcontent-%COMP%]   .status.terminado[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.project-card[_ngcontent-%COMP%]   .status.en-desarrollo[_ngcontent-%COMP%]{background:#cce5ff;color:#004085}.project-card[_ngcontent-%COMP%]   .status.pausado[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.project-card[_ngcontent-%COMP%]   .status.prototipo[_ngcontent-%COMP%]{background:#e7d4f5;color:#5a1e7a}.project-card[_ngcontent-%COMP%]   .short-desc[_ngcontent-%COMP%]{margin:8px 0;font-size:13px;color:#666;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.card-buttons[_ngcontent-%COMP%]{display:flex;gap:8px;margin-top:12px}.card-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;padding:6px;border:none;border-radius:3px;font-size:12px;cursor:pointer;font-weight:600;transition:all .2s}.btn-edit[_ngcontent-%COMP%]{background:#667eea;color:#fff}.btn-edit[_ngcontent-%COMP%]:hover{background:#5568d3}.btn-delete[_ngcontent-%COMP%]{background:#e74c3c;color:#fff}.btn-delete[_ngcontent-%COMP%]:hover{background:#c0392b}.image-url-input-group[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:10px}@media (max-width: 768px){.image-url-input-group[_ngcontent-%COMP%]{flex-direction:column}}.image-url-input[_ngcontent-%COMP%]{flex:1;padding:10px;border:1px solid #ddd;border-radius:5px;font-size:14px}.image-url-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 5px #667eea33}.btn-add-image[_ngcontent-%COMP%]{background:#667eea;color:#fff;padding:10px 20px;border:none;border-radius:5px;cursor:pointer;font-weight:600;white-space:nowrap}.btn-add-image[_ngcontent-%COMP%]:hover{background:#5568d3}.uploaded-images[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(100px,1fr));gap:10px;margin-top:10px}.image-item[_ngcontent-%COMP%]{position:relative;border-radius:5px;overflow:hidden;border:2px solid #ddd;background:#f5f5f5}.image-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100px;object-fit:cover;display:block}.image-item[_ngcontent-%COMP%]:hover{border-color:#e74c3c}.image-item[_ngcontent-%COMP%]:hover   .btn-remove-image[_ngcontent-%COMP%]{opacity:1}.btn-remove-image[_ngcontent-%COMP%]{position:absolute;top:5px;right:5px;background:#e74c3c;color:#fff;border:none;border-radius:50%;width:25px;height:25px;cursor:pointer;font-weight:700;opacity:0;transition:opacity .2s;padding:0;display:flex;align-items:center;justify-content:center}.btn-remove-image[_ngcontent-%COMP%]:hover{background:#c0392b}"]})};export{Z as AdminPanelComponent};
