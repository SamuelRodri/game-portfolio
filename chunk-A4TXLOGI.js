import{A as p,C as m,Da as y,E as o,Ea as I,F as i,Fa as c,G as g,Ga as M,Ha as L,Ia as E,J as v,K as f,Ka as O,L as u,La as P,N as a,P as h,Qa as k,Ra as N,Sa as A,Ta as T,Y as C,_ as F,da as w,fa as S,r as b,s as x,x as s,y as d,z as _}from"./chunk-MPWYWPO7.js";function R(n,r){n&1&&(o(0,"small"),a(1," Email inv\xE1lido "),i())}function V(n,r){n&1&&(o(0,"small"),a(1," La contrase\xF1a es requerida "),i())}function z(n,r){if(n&1){let t=v();o(0,"form",7),f("ngSubmit",function(){b(t);let l=u();return x(l.onLogin())}),o(1,"div",8)(2,"label",9),a(3,"Email"),i(),g(4,"input",10),p(5,R,2,0,"small",11),i(),o(6,"div",8)(7,"label",12),a(8,"Contrase\xF1a"),i(),g(9,"input",13),p(10,V,2,0,"small",11),i(),o(11,"button",14),a(12," Iniciar Sesi\xF3n "),i()()}if(n&2){let t,e,l=u();m("formGroup",l.loginForm),s(5),m("ngIf",((t=l.loginForm.get("email"))==null?null:t.invalid)&&((t=l.loginForm.get("email"))==null?null:t.touched)),s(5),m("ngIf",((e=l.loginForm.get("password"))==null?null:e.invalid)&&((e=l.loginForm.get("password"))==null?null:e.touched)),s(),m("disabled",l.loginForm.invalid)}}function G(n,r){n&1&&(o(0,"div",15)(1,"p"),a(2,"Iniciando sesi\xF3n..."),i()())}function B(n,r){if(n&1&&(o(0,"div",16),a(1),i()),n&2){let t=u();s(),h(" ",t.error," ")}}var q=class n{constructor(r,t,e,l){this.fb=r;this.authService=t;this.router=e;this.route=l}loginForm;isLoading=!1;error=null;returnUrl="/";ngOnInit(){this.loginForm=this.fb.group({email:["",[c.required,c.email]],password:["",[c.required,c.minLength(6)]]}),this.route.queryParams.subscribe(r=>{this.returnUrl=r.returnUrl||"/"})}onLogin(){if(this.loginForm.invalid)return;this.isLoading=!0,this.error=null;let{email:r,password:t}=this.loginForm.value;this.authService.login(r,t).subscribe({next:e=>{this.isLoading=!1,e&&setTimeout(()=>{this.router.navigateByUrl(this.returnUrl)},500)},error:e=>{this.isLoading=!1,console.error("Error de autenticaci\xF3n:",e),e.message.includes("user-not-found")?this.error="Email no encontrado en Firebase":e.message.includes("wrong-password")?this.error="Contrase\xF1a incorrecta":e.message.includes("too-many-requests")?this.error="Demasiados intentos. Intenta m\xE1s tarde":this.error=`Error: ${e.message}`}})}goBack(){this.router.navigate(["/"])}static \u0275fac=function(t){return new(t||n)(d(N),d(y),d(S),d(w))};static \u0275cmp=_({type:n,selectors:[["app-login"]],decls:11,vars:3,consts:[[1,"login-container"],[1,"login-box"],[1,"subtitle"],[3,"formGroup","ngSubmit",4,"ngIf"],["class","loading",4,"ngIf"],["class","error",4,"ngIf"],[1,"btn-back",3,"click"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","email"],["type","email","id","email","formControlName","email","placeholder","tu@email.com","required",""],[4,"ngIf"],["for","password"],["type","password","id","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required",""],["type","submit",1,"btn-login",3,"disabled"],[1,"loading"],[1,"error"]],template:function(t,e){t&1&&(o(0,"div",0)(1,"div",1)(2,"h1"),a(3,"Panel de Administraci\xF3n"),i(),o(4,"p",2),a(5,"Acceso restringido"),i(),p(6,z,13,4,"form",3)(7,G,3,0,"div",4)(8,B,2,1,"div",5),o(9,"button",6),f("click",function(){return e.goBack()}),a(10," \u2190 Volver "),i()()()),t&2&&(s(6),m("ngIf",!e.isLoading),s(),m("ngIf",e.isLoading),s(),m("ngIf",e.error))},dependencies:[F,C,A,E,I,M,L,k,T,O,P],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);padding:20px}.login-box[_ngcontent-%COMP%]{background:#fff;padding:40px;border-radius:10px;box-shadow:0 10px 40px #0000004d;width:100%;max-width:400px}h1[_ngcontent-%COMP%]{text-align:center;color:#333;margin-bottom:10px}.subtitle[_ngcontent-%COMP%]{text-align:center;color:#999;margin-bottom:30px;font-size:14px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;color:#333;font-weight:500}input[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ddd;border-radius:5px;font-size:14px;box-sizing:border-box}input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 5px #667eea4d}small[_ngcontent-%COMP%]{display:block;color:#e74c3c;margin-top:5px;font-size:12px}.btn-login[_ngcontent-%COMP%]{width:100%;padding:12px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:5px;font-size:16px;font-weight:600;cursor:pointer;transition:transform .2s}.btn-login[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px)}.btn-login[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-back[_ngcontent-%COMP%]{width:100%;margin-top:15px;padding:10px;background:#f0f0f0;color:#333;border:none;border-radius:5px;cursor:pointer;font-size:14px}.btn-back[_ngcontent-%COMP%]:hover{background:#e0e0e0}.loading[_ngcontent-%COMP%]{text-align:center;color:#667eea}.error[_ngcontent-%COMP%]{background:#fee;color:#c33;padding:10px;border-radius:5px;margin-bottom:20px;font-size:14px;border-left:4px solid #c33}"]})};export{q as LoginComponent};
